buildscript {
  repositories {
    maven {
      url uri('https://artifactory.io.thehut.local/artifactory/plugins-release')
    }
    mavenCentral()
  }

  dependencies {
    classpath('thg:thg-gradle-plugin:2.1.+')
  }
}

plugins {
  id "com.adarshr.test-logger" version "2.0.0"
}

apply plugin: 'com.thehut.thg-gradle-plugin'
apply plugin: 'java'
sourceCompatibility = 1.8
targetCompatibility = 1.8

ext {
  commonsDbUtilsVersion = '1.7'
  engagementCheckstyleVersion = '1.2.1'
  h2DatabaseVersion = '1.4.200'
  hamcrestVersion = '2.2'
  hikariVersion = '3.4.1'
  junitJupiterVersion = '5.5.2'
  mockitoVersion = '3.1.0'
  spotbugsAnnotationsVersion = '3.1.12'
}

dependencies {

  // Database Utils
  compile("commons-dbutils:commons-dbutils:${commonsDbUtilsVersion}")

  //FindBugs annotations (@SuppressFBWarnings)
  compile("com.github.spotbugs:spotbugs-annotations:${spotbugsAnnotationsVersion}")

  //Unit testing
  testImplementation("org.junit.jupiter:junit-jupiter-api:${junitJupiterVersion}")
  testRuntimeOnly("org.junit.jupiter:junit-jupiter-engine:${junitJupiterVersion}")
  testCompile("org.hamcrest:hamcrest:${hamcrestVersion}")
  compile("org.mockito:mockito-core:${mockitoVersion}")

  //Test database
  testCompile("com.h2database:h2:${h2DatabaseVersion}")
  testCompile("com.zaxxer:HikariCP:${hikariVersion}")
}


artifactory {
	publish {
		defaults {
			publications('mavenJava')
		}
	}
}

publishing {
	publications {
		mavenJava(MavenPublication) {
      from components.java
			artifact jar
		}
	}
}

test {
  useJUnitPlatform()
}

spotbugsMain {
  reportLevel = 'low'
}

spotbugsTest {
  reportLevel = 'medium'
}

